#!/bin/bash
branches=`git branch`
if [ 0 -ne $? ]
then
    echo "`pwd` is not in git control."
    exit
fi

cur_branch=`git branch | awk '{print $2}'`
echo Current branch is: $cur_branch
 
echo "$branches" | 
while read line
do
    branch=`echo "$line" | sed 's/\*//'`
    words=`git remote show origin | grep $branch | grep '(up to date)'`
#    if [ -z "$words" ]
#    then
	cmd="git checkout $branch"
	echo $cmd
	$cmd
        git pull
	if [ 0 -ne $? ]
	then
	    echo "ERROR: git pull failed!"
	    break
	fi
#    fi
done

if [ -n "$cur_branch" ]
then
    git checkout $cur_branch
fi
